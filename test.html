<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase é€£ç·šæ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            max-width: 700px;
            margin: 40px auto;
            padding: 20px;
            background: #f8f9fa;
            color: #333;
        }
        h1 { color: #2E86AB; text-align: center; }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background: #2E86AB;
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
        }
        button:hover { background: #1B5E7E; }
        #result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            font-size: 18px;
            text-align: center;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>ğŸŠâ€â™‚ï¸ Supabase é€£ç·šæ¸¬è©¦</h1>
    <p>å¡«å¯«è³‡æ–™å¾Œé€å‡ºï¼Œæª¢æŸ¥ Supabase æ˜¯å¦æˆåŠŸæ”¶åˆ°ã€‚</p>

    <div class="form-group">
        <label>è¡Œç¨‹åç¨±</label>
        <input type="text" id="tripName" value="è¥¿æ—ç§˜å¢ƒ">
    </div>
    <div class="form-group">
        <label>ä¸»å ±åäººé›»è©±</label>
        <input type="text" id="mainPhone" value="0912345678">
    </div>
    <div class="form-group">
        <label>åƒåŠ è€…å§“å</label>
        <input type="text" id="participantName" value="ç‹å°æ˜">
    </div>
    <div class="form-group">
        <label>èº«é«˜ (cm)</label>
        <input type="number" id="height" value="170">
    </div>
    <div class="form-group">
        <label>æº¯æºªé‹å°ºå¯¸ (cm)</label>
        <select id="shoeSize">
            <option value="25" selected>25 cm</option>
            <option value="25.5">25.5 cm</option>
            <option value="26">26 cm</option>
            <option value="26.5">26.5 cm</option>
            <option value="27">27 cm</option>
        </select>
    </div>
    <div class="form-group">
        <label>å¥åº·ç‹€æ³</label>
        <textarea id="medical" rows="3">ç„¡</textarea>
    </div>

    <button onclick="submitToSupabase()">é€å‡ºæ¸¬è©¦è³‡æ–™åˆ° Supabase</button>

    <div id="result">çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡...</div>

    <script>
        // ==================== è«‹ä¿®æ”¹é€™ä¸‰è¡Œ ====================
        const SUPABASE_URL = 'https://feegzkbrumieucyweghm.supabase.co';          // ä¾‹å¦‚ï¼šhttps://abcde.supabase.co
        const SUPABASE_ANON_KEY = 'sb_publishable_B_taCjibUltphJ-1jmmWYQ_8__FYb45'; // ä½ çš„ anon key
        const TABLE_NAME = 'bookings';  // ä½ çš„è³‡æ–™è¡¨åç¨±ï¼Œé è¨­æ˜¯ bookings
        // =====================================================

        async function submitToSupabase() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'é€å‡ºä¸­ï¼Œè«‹ç¨å€™...';
            resultDiv.className = '';

            const data = {
                trip_name: document.getElementById('tripName').value.trim(),
                main_phone: document.getElementById('mainPhone').value.trim(),
                participant_name: document.getElementById('participantName').value.trim(),
                height: parseInt(document.getElementById('height').value),
                shoe_size: parseFloat(document.getElementById('shoeSize').value),
                medical_conditions: document.getElementById('medical').value.trim() || 'ç„¡'
            };

            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/${TABLE_NAME}`, {
                    method: 'POST',
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                        'Content-Type': 'application/json',
                        'Prefer': 'return=minimal'  // ä¸å›å‚³è³‡æ–™ï¼Œåªå› status
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok || response.status === 201) {
                    resultDiv.innerHTML = 'âœ… é è¨‚æˆåŠŸï¼è³‡æ–™å·²æˆåŠŸå¯«å…¥ Supabaseã€‚<br>è«‹å» Supabase Dashboard æŸ¥çœ‹ bookings è¡¨ã€‚';
                    resultDiv.className = 'success';
                } else {
                    const errorText = await response.text();
                    resultDiv.innerHTML = `âŒ é€å‡ºå¤±æ•—ï¼ˆç‹€æ…‹ç¢¼ï¼š${response.status}ï¼‰<br>${errorText}`;
                    resultDiv.className = 'error';
                }
            } catch (err) {
                resultDiv.innerHTML = `âŒ ç¶²è·¯éŒ¯èª¤ï¼š<br>${err.message}<br>è«‹ç¢ºèª URLã€anon key æ˜¯å¦æ­£ç¢ºï¼Œæˆ–ç¶²è·¯æ˜¯å¦æ­£å¸¸ã€‚`;
                resultDiv.className = 'error';
            }
        }
    </script>
</body>
</html>
